<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
		<class name="com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO"  table="ff_d_customer">
		<id name="customerId" type="java.lang.Integer" column="CUSTOMER_ID">
			<generator class="native" />
		</id>
		
		<many-to-one name="officeMappedTO"
			class="com.ff.domain.organization.OfficeDO" lazy="false" fetch="join" >
			<column name="OFFICE_MAPPED_TO" />
		</many-to-one>
		
		<many-to-one name="salesOffice"
			class="com.ff.domain.organization.OfficeDO" lazy="false" fetch="join" >
			<column name="SALES_OFFICE" />
		</many-to-one>
		
		
			<many-to-one name="primaryContact" class="com.ff.domain.ratemanagement.masters.ContactDO" cascade="all" lazy="false" fetch="join" >
		<column name="PRIMARY_CONTACT" />
		</many-to-one>
		
		<many-to-one name="secondaryContact" class="com.ff.domain.ratemanagement.masters.ContactDO" cascade="all"   lazy="false" fetch="join">
		<column name="SECONDARY_CONTACT" />
		</many-to-one>
		
		
		<!-- <many-to-one name="billingCycle" class="com.ff.domain.stockmanagement.masters.StockStandardTypeDO"  lazy="false" fetch="join">
		<column name="BILLING_CYCLE" />
		</many-to-one>
		
		<many-to-one name="paymentTerm" class="com.ff.domain.stockmanagement.masters.StockStandardTypeDO"  lazy="false" fetch="join">
		<column name="PAYEMENT_TERM" />
		</many-to-one> -->
		
		<many-to-one name="industryCategory" class="com.ff.domain.ratemanagement.masters.RateIndustryCategoryDO"  lazy="false" fetch="join" >
		<column name="INDUSTRY_CATEGORY" />
		</many-to-one>
		
		<many-to-one name="industryType" class="com.ff.domain.ratemanagement.masters.RateIndustryTypeDO"  lazy="false" fetch="join" >
		<column name="INDUSTRY_TYPE" />
		</many-to-one>
		
		<many-to-one name="customerCategory" class="com.ff.domain.ratemanagement.masters.RateCustomerCategoryDO"  lazy="false" fetch="join" >
		<column name="CUSTOMER_CATEGORY" />
		</many-to-one>
		
		<many-to-one name="salesPerson" class="com.ff.domain.organization.EmployeeDO"  lazy="false" fetch="join" >
		<column name="SALES_PERSON" />
		</many-to-one>
		
		<many-to-one name="address" class="com.ff.domain.pickup.AddressDO" cascade="all"  lazy="false" fetch="join">
		<column name="ADDRESS" />
		</many-to-one>
		
		<many-to-one name="customerType" class="com.ff.domain.business.CustomerTypeDO" cascade="all"  lazy="false" fetch="join">
		<column name="CUSTOMER_TYPE" />
		</many-to-one>
		
		<many-to-one name="groupKey" class="com.ff.domain.ratemanagement.masters.CustomerGroupDO"  lazy="false" fetch="join">
		<column name="GROUP_KEY" />
		</many-to-one>
		
		
		<property name="contractNo" column="CONTRACT_NO" />
		<property name="customerCode" column="CUSTOMER_CODE" />
		<property name="businessName" column="BUSINESS_NAME"  />
		<property name="tanNo" column="TAN_NO"  />
		<property name="distributionChannels" column="DISTRIBUTION_CHANNELS"  />
		<property name="panNo" column="PAN_NO" />
		<property name="currentStatus" column="CUR_STATUS" />
	 	<property name="businessType" column="BUSINESS_TYPE"  /> 
	 	<property name="paymentTerm" column="PAYEMENT_TERM" />
	 	<property name="billingCycle" column="BILLING_CYCLE" />
	 	<property name="dtToBranch" column="DT_TO_BRANCH"/>
		<property name="legacyCustCode" column="LEGACY_CUSTOMER_CODE"/>
		<!--  common attributes  START-->
		<property name="sapStatus" column="DT_SAP_OUTBOUND" />
		<property name="sapTimestamp" column="SAP_TIMESTAMP" /> 
		<property name="createdBy" column="CREATED_BY" />
		<property name="updatedBy" column="UPDATED_BY" />
		<property name="createdDate" column="CREATED_DATE" />
		<property name="updatedDate" column="UPDATED_DATE" />
		<!--  common attributes  END-->
  
    </class>

	<query name="getCustByCodeSAP">
      <![CDATA[ 
      		FROM	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
      		WHERE 	cust.customerCode=:customerCode	
      ]]>
	</query>
	
	<query name="getContractByNoSAP">
      <![CDATA[ 
      		FROM	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
      		WHERE 	cust.contractNo=:contractNo	
      ]]>
	</query>
	
	<query name="getContractDtlsForInterface">
      <![CDATA[ 
      		FROM	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
      		WHERE 	cust.sapStatus=:sapStatus
      		AND		cust.contractNo IS NOT NULL
      ]]>
	</query>
	
	<query name="getContractDtlsForSAP">
      <![CDATA[ 
      		SELECT 	COUNT(*)
      		FROM	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
      		WHERE 	cust.sapStatus=:sapStatus
      		AND		cust.contractNo IS NOT NULL
      ]]>
	</query>
	
	<query name="updateContractDetailsForSAP">
		<![CDATA[ 
			UPDATE	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
			SET		cust.sapStatus=:sapStatus,cust.sapTimestamp=:sapTimestamp
			WHERE 	cust.contractNo=:contractNo
		]]>
	</query>
	
	<query name="updateCustNo">
		<![CDATA[
			UPDATE	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
			SET		cust.customerCode=:customerCode,
					cust.sapStatus=:sapStatus,
					cust.sapTimestamp=:sapTimestamp,
					cust.currentStatus=:currentStatus,
					cust.dtToBranch=:dtToBranch,
					cust.updatedBy=:updatedBy,
					cust.updatedDate=:updatedDate
			WHERE 	cust.customerId=:customerId
		]]>
	</query>
	
	<query name="updateCustomerStatus">
		<![CDATA[ 
			UPDATE	com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
			SET		cust.currentStatus=:currentStatus, cust.updatedDate=:updatedDate
			WHERE 	cust.customerId=:customerId
		]]>
	</query>
	
	<query name="getCustomerIdByContractNo">
		<![CDATA[ 
			SELECT cust.customerId FROM com.ff.domain.ratemanagement.masters.CSDSAPCustomerDO cust
			WHERE cust.contractNo=:contractNo
		]]>
	</query>
	
</hibernate-mapping>