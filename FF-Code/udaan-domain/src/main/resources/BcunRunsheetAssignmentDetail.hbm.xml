<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<class name="com.ff.domain.pickup.BcunRunsheetAssignmentDetailDO" table="ff_f_pickup_assignment_detail">
		<id name="pickupAssignmentDtlId" type="java.lang.Integer">
			<column name="PICKUP_ASSIGNMENT_DETAIL_ID" />
			<generator class="native" />
		</id>
		<property name="pickupType" type="java.lang.String">
			<column name="PICKUP_TYPE" />
		</property>
		<property name="mappedStatus" type="java.lang.String">
			<column name="MAPPED_STATUS" />
		</property>
		<property name="pickupDlvLocation" column="LOCATION_ID" />
		<property name="createdDate" type="java.util.Date">
			<column name="CREATION_DATE" />
		</property>
		<property name="updatedDate" type="java.util.Date">
			<column name="UPDATE_DATE" />
		</property>
		<property name="dtToBranch">
			<column name="DT_TO_BRANCH" />
		</property>
		<property name="dtToCentral">
			<column name="DT_TO_CENTRAL" />
		</property>
		<property name="createdBy" column="CREATED_BY" type="java.lang.Integer"/>
        <property name="updatedBy" column="UPDATE_BY" type="java.lang.Integer"/>
		
		<!-- <many-to-one name="pickupDlvLocation"
			class="com.ff.domain.pickup.PickupDeliveryLocationDO" column="LOCATION_ID" lazy="false" unique="true" fetch="join" /> -->
		<many-to-one name="pickupAssignmentHeader" class="com.ff.domain.pickup.BcunRunsheetAssignmentHeaderDO" 
			column="PICKUP_ASSIGNMENT_HEADER_ID" unique="true" lazy="false" fetch="join"/>
		<many-to-one name="reversePickupCustomer" class="com.ff.domain.pickup.ReversePickupForAssignmentDetailDO" column="REQUEST_DETAIL_ID"
			unique="true" lazy="false" fetch="join"/>		
	</class>
	<!-- Start Queries For Data Sync -->
	<query name="getAssignmentDetailId">
		<![CDATA[SELECT detail.pickupAssignmentDtlId 
					FROM com.ff.domain.pickup.BcunRunsheetAssignmentDetailDO detail 
					WHERE detail.pickupAssignmentHeader.pickupAssignmentHeaderId =:assignmentHeaderId
					AND (((detail.pickupType='R') AND detail.reversePickupCustomer.detailId=(SELECT revDetail.detailId 
																	FROM com.ff.domain.pickup.BcunRunsheetReversePickupOrderDetailDO revDetail 
																	WHERE revDetail.orderNumber=:orderNumber))
					OR ((detail.pickupType='S') AND (detail.pickupDlvLocation = :pickupDlvLocationId)))]]> 
	</query>
	<!-- End Queries For Data Sync -->
</hibernate-mapping>