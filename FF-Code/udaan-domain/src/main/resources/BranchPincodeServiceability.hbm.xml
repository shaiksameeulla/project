<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<class name="com.ff.domain.organization.BranchPincodeServiceabilityDO" table="ff_d_branch_pincode_serviceablity">
		<id name="branchPincodeId" type="java.lang.Integer">
			<column name="PINCODE_SERVICES_BRANCH_ID" />
			<generator class="native" />
		</id>		
        <property name="officeId" column="OFFICE_ID"/>        
       	<property name="pincodeId" column="PINCODE_ID"/>
        
        <property name="dtToBranch">
			<column name="DT_TO_BRANCH" />
		</property>	 
		
		<property name="transactionCreateDate">
			<column name="CREATION_DATE"/>
		</property>	 
		
		<property name="transactionModifiedDate">
			<column name="UPDATE_DATE"/>
		</property>	 
		
		<property name="createdBy">
			<column name="CREATED_BY" />
		</property>	 
		
		<property name="updatedBy">
			<column name="UPDATE_BY" />
		</property>	 
		
		<property name="status">
			<column name="STATUS" />
		</property>	      
	</class>	
	
	<query name="validateBranchPincodeServiceabilityForHubOffice">
		<![CDATA[ FROM com.ff.domain.organization.BranchPincodeServiceabilityDO branchPin 
				  WHERE branchPin.pincodeId=:pincodeId 
				  AND branchPin.officeId IN (SELECT office.officeId FROM com.ff.domain.organization.OfficeDO office 
				  							 WHERE office.reportingHUB=:officeId)
		]]>
	</query>
	<query name="validateBranchPincodeServiceabilityForHubOfficeByCity">
		<![CDATA[ FROM com.ff.domain.organization.BranchPincodeServiceabilityDO branchPin 
				  WHERE branchPin.pincodeId=:pincodeId 
				  AND branchPin.officeId IN (  SELECT off.officeId FROM com.ff.domain.organization.OfficeDO off 
				  							   WHERE off.reportingHUB IN 
				  							   (SELECT office.officeId FROM com.ff.domain.organization.OfficeDO office 
				  							 						   INNER JOIN office.officeTypeDO officeType
				  							 						   WHERE office.cityId=:cityId 
				  							 						   AND officeType.offcTypeCode = 'HO')
				  							 )
		]]>
	</query>
	
	<query name="validateBranchPincodeSrvbltyByOfficeAndPincode">
		<![CDATA[ select branchPin.branchPincodeId FROM com.ff.domain.organization.BranchPincodeServiceabilityDO branchPin 
				  WHERE branchPin.pincodeId=:pincodeId 
				  AND branchPin.officeId =:officeId
				  AND branchPin.status ='A'
		]]>
	</query>
</hibernate-mapping>