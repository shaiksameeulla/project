<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd 
	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

	<bean id="bcunProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
		<property name="location" value="classpath:Bcun.properties" />
	</bean>
	<bean id="ftpClientService" class="com.capgemini.lbs.framework.utils.SimpleFTPClient">
	</bean>
	<bean id="ftpProp" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
		<property name="location" value="classpath:ftp.properties" />
	</bean>
	<bean id="inboundBranchService" class="com.cg.lbs.bcun.service.inbound.InboundBranchServiceImpl">
		<property name="datasyncDao" ref="bcunDataSyncDao" />
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="emailSenderUtil" ref="emailSenderUtil" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundCentralService" class="com.cg.lbs.bcun.service.inbound.InboundCentralServiceImpl">
		<property name="datasyncDao" ref="bcunDataSyncDao" />
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="emailSenderUtil" ref="emailSenderUtil" />
		<property name="processingBrCode" value="${branch.office.code}"/>
		<!-- <property name="inboundCentralDataProcessor" ref="inboundCentralDataProcessor" />	 -->
	</bean>
	<bean id="outboundBranchService" class="com.cg.lbs.bcun.service.outbound.OutboundBranchServiceImpl">
		<property name="datasyncDao" ref="bcunDataSyncDao" />
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="emailSenderUtil" ref="emailSenderUtil" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="outboundCentralService" class="com.cg.lbs.bcun.service.outbound.OutboundCentralServiceImpl">
		<property name="datasyncDao" ref="bcunDataSyncDao" />
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="emailSenderUtil" ref="emailSenderUtil" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundBranchDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchDataProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundBranchBookingDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchBookingDataProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundBranchDrsDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchDrsDataProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundBranchManifestDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchManifestDataProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundBranchPickupDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchPickupDataProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	
	<bean id="inboundCentralDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundCentralDataProcessor">
		<property name="bcunService" ref="inboundCentralService" />
	</bean>
	<bean id="outboundCentralUmcDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralUmcDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundCentralStockDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralStockDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundCentralDrsDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralDrsDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundCentralStockContractDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralStockContractDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundCentralPickupDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralPickupDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundCentralManifestDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralManifestDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
		<property name="outboundCentralManifestDataSyncService" ref="outboundCentralManifestDataSyncService"/>
	</bean>
	
	<bean id="outboundCentralManifestCategoryDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralManifestCategoryDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
		<property name="outboundCentralManifestDataSyncService" ref="outboundCentralManifestDataSyncService"/>
	</bean>
	
	<bean id="outboundCentralConsignmentDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralConsignmentDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
		<property name="outboundCentralConsignmentDataSyncService" ref="outboundCentralConsignmentDataSyncService"/>
	</bean>
	
	<bean id="outboundCentralDataSyncProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	
	<bean id="outboundCentralCategoryDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralCategoryDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	
	<bean id="outboundCentralTransactionalMasterDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralTransactionalMasterDataProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	
	<bean id="outboundBranchDateExtractProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchDataExtractProcessor">
		<property name="requestUtil" ref="requestUtil"/>
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>	<bean id="outboundBranchMasterDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchMasterDataProcessor">
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>
	<bean id="outboundBranchTransDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchTransDataProcessor">
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>
	<bean id="outboundMasterDailyDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundMasterDataDailyProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	
	<bean id="outboundErrorProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchErrorDataProcessor">
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>
	<bean id="inboundErrorProcessor" class="com.cg.lbs.bcun.service.inbound.InboundCentralErrorDataProcessor">
		<property name="bcunService" ref="inboundCentralService"/>
	</bean>
	<bean id="outboundMasterWeeklyDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundMasterDataWeeklyProcessor">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="requestUtil" class="com.cg.lbs.bcun.service.outbound.HttpRequestUtil">
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="httpClient" ref="httpClient"/>
		<property name="requestBranchCode" value="${branch.office.code}"/>
	</bean>
	
	<!--  newly created blob branch download helper for optimization start -->
	<bean id="outboundBranchDataRequestProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchDataRequestProcessor">
		<property name="dataRequestUtil" ref="dataRequestUtil"/>
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>	
	<bean id="dataRequestUtil" class="com.cg.lbs.bcun.service.outbound.DataRequestUtil">
		<property name="bcunProperties" ref="bcunProperties"/>
		<property name="httpClient" ref="httpClient"/>
		<property name="requestBranchCode" value="${branch.office.code}"/>
	</bean>
	<!--  newly created blob branch download helper for optimization END -->
	
	<bean id="httpClient" class="org.apache.commons.httpclient.HttpClient">
		<constructor-arg name="params">
                            <bean name="params" class="org.apache.commons.httpclient.params.HttpClientParams">
                                <!--Here we set the socket time out which is essentially the same thing as the readTimeout.  It is the time we wait for a response-->
                                <property name="soTimeout" value="200000"/>
                                <!--Here we set the connection manager time out which is how long we wait to get an established connection returned from the connection manager.
            						 The default is 60 seconds which makes the client just hang.  Now we get more immediate response from our RetryConnection.  But it isn't totally reliable cause of underlying tcp/ip-->
                                <property name="connectionManagerTimeout" value="130000"/>
                            </bean>
         </constructor-arg>
          <constructor-arg name="httpConnectionManager">
                            <bean class="org.apache.commons.httpclient.MultiThreadedHttpConnectionManager">
                            <property name="params">
                                    <bean class="org.apache.commons.httpclient.params.HttpConnectionManagerParams">
                                        <!--Here we set the socket time out which is essentially the same thing as the readTimeout.  It is the time we wait for a response-->
                                        <property name="soTimeout" value="180000"/>
                                        <!--Here we set the connection time out which is supposed to be how long we wait for the connect to be established. This shortness allows us to catch it and enable the retry function.  The default is 60 seconds which makes the client just hang.  -->
                                        <property name="connectionTimeout" value="100000"/>
                                        <property name="defaultMaxConnectionsPerHost" value="15"/>
                                        <property name="maxTotalConnections" value="30"/>
                                    </bean>
                                </property>
                                </bean>                          
                        </constructor-arg>
	
	</bean>
	
	
                            
                       
	
	
	<bean id="httpClientUtill" class="com.cg.lbs.bcun.utility.UserHttpClientUtil">
		<property name="httpClient" ref="httpClient"/>
		<property name="createLoggedInRequest" ref="createLoggedInRequest"/>
	</bean>
	<bean id="createLoggedInRequest" class="com.cg.lbs.bcun.utility.CreateHttpLoggingInRequest">
		<property name="httpClient" ref="httpClient"/>
	</bean>
	<bean id="cleanupFileProcessor" class="com.cg.lbs.bcun.service.common.BcunCleanupFileProcessor">
		<property name="bcunProperties" ref="bcunProperties"/>
	</bean>
	
	<bean id="outboundCentralManifestDataSyncService" class="com.cg.lbs.bcun.service.outbound.OutboundCentralManifestDataSyncServiceImpl">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	
	<bean id="outboundCentralConsignmentDataSyncService" class="com.cg.lbs.bcun.service.outbound.OutboundCentralConsignmentDataSyncServiceImpl">
		<property name="bcunService" ref="outboundCentralService"/>
	</bean>
	<bean id="outboundPropertyReader" class="com.cg.lbs.bcun.utility.OutboundPropertyReader"/>
	<bean id="inboundPropertyReader" class="com.cg.lbs.bcun.utility.InboundPropertyReader"/>
	<bean id="outboundMasterPropertyReader" class="com.cg.lbs.bcun.utility.OutboundMasterDataPropertyReader"/>
	
	<bean id="inboundFileProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchFTPFileProcessor">
		<property name="bcunService" ref="inboundBranchService" />
		<property name="ftpCLient" ref="ftpClientService" />
		<property name="ftpProp" ref="ftpProp" />
	</bean>
	<bean id="bcunSystemAuth" class="com.cg.lbs.bcun.service.BcunSystemAuthServiceImpl">
		<property name="bcunSystemAuthDao" ref="bcunSystemAuthDao" />
		<property name="requestBranchCode" value="${branch.office.code}"/>
		<property name="bcunPopulateSysUserCodesDAO" ref="bcunPopulateSysUserCodesDAO" />
	</bean>
	<!-- bcun Reconcillation data -->
	<bean id="outboundCentralDataReconcillationProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundCentralReconciliationDataProcessor">
		<property name="bcunService" ref="outboundBranchService"/> 
	</bean>
	<bean id="outboundBranchReconcileDataProcessor" class="com.cg.lbs.bcun.service.outbound.OutboundBranchReconcileDataProcessor">
		<property name="bcunService" ref="outboundBranchService"/>
	</bean>
	<bean id="inboundBranchReconciliationDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundBranchReconciliationDataProcessor">
		<property name="bcunService" ref="inboundBranchService"/>
		<property name="processingBrCode" value="${branch.office.code}"/>
	</bean>
	<bean id="inboundCentralReconcileDataProcessor" class="com.cg.lbs.bcun.service.inbound.InboundCentralReconciliationDataProcessor">
		<property name="bcunService" ref="inboundCentralService" />
	</bean>
	<!-- Released scripts Run starts -->
	<bean id="releasedScriptsService" class="com.cg.lbs.bcun.service.BcunReleasedScriptsServiceImpl">
		<property name="datasyncDao" ref="bcunDataSyncDao" />
	</bean>
	<!-- Released scripts Run ends -->
	
</beans>