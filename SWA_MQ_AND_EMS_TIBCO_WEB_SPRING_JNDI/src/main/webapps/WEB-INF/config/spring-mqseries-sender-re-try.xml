<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gfe="http://www.springframework.org/schema/gemfire"
	xmlns:util="http://www.springframework.org/schema/util" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:gfe-data="http://www.springframework.org/schema/data/gemfire"
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:context="http://www.springframework.org/schema/context"
	 xmlns:cache="http://www.springframework.org/schema/cache"
	 xmlns:aop="http://www.springframework.org/schema/aop"
	 xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/gemfire 	http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
						http://www.springframework.org/schema/beans 	http://www.springframework.org/schema/beans/spring-beans.xsd
						http://www.springframework.org/schema/util 		http://www.springframework.org/schema/util/spring-util.xsd
						http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
						http://www.springframework.org/schema/data/gemfire http://www.springframework.org/schema/data/gemfire/spring-data-gemfire.xsd
						http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
						http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd 
						http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
						http://www.springframework.org/schema/aop  http://www.springframework.org/schema/aop/spring-aop.xsd 
						">
    
<aop:config>
    <aop:pointcut id="transactional"
        expression="execution(* com.capgemini.mq.JMSMQSender.*(..))" />
    <aop:advisor pointcut-ref="transactional"
        advice-ref="retryAdvice" order="-1"/>
</aop:config>

<bean id="retryAdvice"
    class="org.springframework.retry.interceptor.RetryOperationsInterceptor">
    <property name="retryOperations" ref="retryTemplate"/>
    </bean>
    
    <!-- Setup the time between retries. -->
	<bean id="backOffPolicy" class="org.springframework.retry.backoff.FixedBackOffPolicy">
		<property name="backOffPeriod" value="10000"/>
	</bean>
	<!-- Setup the time between retries. -->
	<bean id="retryPolicy" class="org.springframework.retry.policy.SimpleRetryPolicy">
						<property name="maxAttempts" value="2" />
		</bean>



  <bean id="retryTemplate" class="org.springframework.retry.support.RetryTemplate">
		<property name="retryPolicy" ref="retryPolicy"/>
		<property name="backOffPolicy" ref="backOffPolicy"/>
	</bean>
    
    
      
</beans>